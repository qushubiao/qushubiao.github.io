<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxx-xx"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-xxxxxx-xx');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s an IT blog..."/>
  <meta name="keyword" content="v-vincen,v-vincen,livemylife,IT  blog,Blog"/>
  <link rel="shortcut icon" href="/img/avatar/tiger.jpg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="http://techqu.top/en/Java项目：六级英语单词对战/">
  <title>
    
      Java项目：六级英语单词对战 - Welcome!My Friend!
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--dark">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'dark';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'your-community/your-room'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">欢迎来到小曲同学的毛坯网站</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
          
          
          <!-- LangSelect start -->
          <!-- LangSelect -->
<li>
  <a id="lang-select-label"><i class="fa fa-globe"></i>
    <span>
      English
    </span>
    <select id="lang-select" data-canonical="en/Java项目：六级英语单词对战/">
      
      
      <option value="en"  selected >
        English
      </option>
      
      <option value="cn" >
        简体中文
      </option>
      
    </select>
  </a>
</li>

          <!-- LangSelect end -->
          
          
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('');
      --intro-header-background-image-url-page: url('/img/header_img/archive_bg2.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/archive_bg2.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url(''); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/img/signature/1(1).PNG');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#Java" title="Java">Java</a>
              
            </div>
            <h1>Java项目：六级英语单词对战</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by Mr.Qu on
              2022-05-12
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">16</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">3.8k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <hr>
<h1>演示视频</h1>
<h2 id="JAVA英语六级单词对战大作业">[JAVA英语六级单词对战大作业]</h2>
<h2 id="https-www-bilibili-com-video-BV18T4y1B7ws-share-source-copy-web"><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV18T4y1B7ws?share_source=copy_web">https://www.bilibili.com/video/BV18T4y1B7ws?share_source=copy_web</a></h2>
<h1>题目要求：</h1>
<h2 id="用Java编程开发“六级单词强化记忆”游戏">用Java编程开发“六级单词强化记忆”游戏</h2>
<h3 id="（1）准备：">（1）准备：</h3>
<p>在网上下载英语六级词汇表，中英文对应。保存在服务器端，服务器可以让两个客户端连入对战。两人初始分数为10分。</p>
<h3 id="（2）功能1：">（2）功能1：</h3>
<p>两个客户端界面打开，开始游戏。服务器随机选出一个英文单词的中文单词描述，发给两个客户端显示。该中文单词描述，从界面顶端落下。界面底端出现该英文单词中的1-2个提示字母，客户端补齐其他字母，提交。规则：在中文单词描述掉到底端之前，先提交正确的，该客户端增加1分，对方分数不变，进入下一局；先提交但是错误的，该客户端扣2分，对方分数不变，进入下一局；两人在掉到底端前都不回答，两人都扣1分，进入下一局。某个用户分数扣到0分，则游戏输掉，退出。</p>
<h3 id="（3）功能2：">（3）功能2：</h3>
<p>“成绩记忆”。如果一个单词，在功能1中，被用户答对，将其保存在“已掌握单词.txt”中；如果一个单词，在功能1中，答错或没有答，则保存在“未掌握单词.txt”中（标注是答错还是没答），用户可以打开复习。对于客户端，“已掌握单词.txt”和“未掌握单词.txt”，保存在本地。</p>
<h1>服务器端：</h1>
<h2 id="功能：">功能：</h2>
<h3 id="构造函数：">构造函数：</h3>
<h4 id="构造函数概述：">构造函数概述：</h4>
<p>设置窗口为：服务器端，设置关闭按钮，设置大小，建立端口，接受客户连接的死循环开始运行</p>
<h4 id="源代码：">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">server</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.setTitle(<span class="string">&quot;服务器端&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    <span class="keyword">this</span>.setSize(<span class="number">400</span>, <span class="number">200</span>);</span><br><span class="line">    <span class="keyword">this</span>.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    ss = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);<span class="comment">//服务器开辟一个端口</span></span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();<span class="comment">//接受客户连接的死循环开始运行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="run函数：">run函数：</h3>
<h4 id="run函数概述：">run函数概述：</h4>
<p>用来接收等待客户端不断连入时的线程，有客户端接入的时候为其创造一个线程，将这个线程加入到线程数组，启动这个线程</p>
<h4 id="源代码：-2">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;<span class="comment">//此线程是用来接收等待客户端不断连入时的线程</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            s = ss.accept();<span class="comment">//等待接入</span></span><br><span class="line">            ChatThread ct = <span class="keyword">new</span> ChatThread(s);<span class="comment">//有客户端接入的时候为其创造一个线程</span></span><br><span class="line">            clients.add(ct);<span class="comment">//将这个线程加入到线程数组</span></span><br><span class="line">            ct.start();<span class="comment">//启动这个线程</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        ex.printStackTrace();</span><br><span class="line">        javax.swing.JOptionPane.showMessageDialog(<span class="keyword">this</span>, <span class="string">&quot;游戏异常退出！&quot;</span>);</span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ChatThread类">ChatThread类:</h2>
<h3 id="构造函数：-2">构造函数：</h3>
<h4 id="构造函数概述：-2">构造函数概述：</h4>
<p>创建一个输入输出流。</p>
<h4 id="源代码：-3">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> ArrayList&lt;ChatThread&gt; clients = <span class="keyword">new</span> ArrayList&lt;ChatThread&gt;();<span class="comment">//保存每个客户端连入的变长数组</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ChatThread</span><span class="params">(Socket s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.s = s;</span><br><span class="line">    br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(s.getInputStream()));</span><br><span class="line">    ps = <span class="keyword">new</span> PrintStream(s.getOutputStream());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="run函数：-2">run函数：</h3>
<h4 id="run函数概述：-2">run函数概述：</h4>
<p>开始时，服务器首先生成一个大小有限制的随机数，并发给所有的客户端，然后就开始接收客户端的各种指令，加以处理后发回给客户端，实现服务器端和客户端之间的通信。具体各种操作下面介绍函数的时候会提及到。</p>
<h4 id="源代码：-4">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//开始时，服务器首先生成一个大小有限制的随机数，并发给所有的客户端</span></span><br><span class="line">        <span class="keyword">int</span> wn = rnd.nextInt(<span class="number">2000</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Start:&quot;</span> + wn);</span><br><span class="line">        String swn = <span class="string">&quot;START#&quot;</span> + Integer.toString(wn);</span><br><span class="line">        sendMessage(swn);</span><br><span class="line">        <span class="keyword">while</span> (canRun) &#123;</span><br><span class="line">            <span class="comment">//在这里</span></span><br><span class="line">            String str = br.readLine();</span><br><span class="line">            String[] strs = str.split(<span class="string">&quot;#&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (strs[<span class="number">0</span>].equals(<span class="string">&quot;LIFE&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">//将生命值转发给所有的客户端</span></span><br><span class="line">                <span class="comment">//sendMessage(strs[1]);</span></span><br><span class="line">                <span class="keyword">int</span> rn = rnd.nextInt(<span class="number">2000</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;RdNumber:&quot;</span> + rn);</span><br><span class="line">                System.out.println(<span class="string">&quot;减或加生命值&quot;</span>);</span><br><span class="line">                String srn = <span class="string">&quot;START#&quot;</span> + Integer.toString(rn);</span><br><span class="line">                sendMessage(<span class="string">&quot;LIFE#&quot;</span> + strs[<span class="number">1</span>] + <span class="string">&quot;#&quot;</span> + srn);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (strs[<span class="number">0</span>].equals(<span class="string">&quot;WIN&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">//有一方生命值已经归为0，另一方胜利</span></span><br><span class="line">                String msgWIN = <span class="string">&quot;UWIN#&quot;</span>;</span><br><span class="line">                sendMessage(msgWIN);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (strs[<span class="number">0</span>].equals(<span class="string">&quot;ASKRN&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">int</span> rn1 = rnd.nextInt(<span class="number">2000</span>);</span><br><span class="line">                String swn1 = <span class="string">&quot;START#&quot;</span> + Integer.toString(rn1);</span><br><span class="line">                System.out.println(<span class="string">&quot;仅用于同步&quot;</span>);</span><br><span class="line">                sendMessage(<span class="string">&quot;NOASK#&quot;</span>+ swn1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        canRun = <span class="keyword">false</span>;</span><br><span class="line">        clients.remove(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="群发消息函数：">群发消息函数：</h3>
<h4 id="群发消息函数概述：">群发消息函数概述：</h4>
<p>运用for循环进行遍历，然后群发消息即可。</p>
<h4 id="源代码：-5">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ChatThread ct:clients)&#123;</span><br><span class="line">        ct.ps.println(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="主函数：">主函数：</h3>
<h4 id="主函数概述：">主函数概述：</h4>
<p>new一个serve即可。</p>
<h4 id="源代码：-6">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    <span class="keyword">new</span> server();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>客户端：</h1>
<p><img src="https://s2.loli.net/2022/05/12/jAyZeRvtaB32IQw.png" alt="client"></p>
<h2 id="功能：-2">功能：</h2>
<h3 id="构造函数：-3">构造函数：</h3>
<h4 id="构造函数概述：-3">构造函数概述：</h4>
<p>首先是一系列的控件放置，包含窗口大小设置、背景颜色设置、字体设置、控件位置设置，然后调用init（）函数，紧接着开始连接服务器，连接到服务器后开启线程，run（）方法用来随时处理服务器发送过来的数据，定义“提交”按钮触发的事件，然后开启时间线。</p>
<h4 id="按钮触发事件概述：">按钮触发事件概述：</h4>
<p>获取输入框的文本，和从服务器读到的正确单词进行对比，如果正确，将这个单词写入“right.txt”文件，并且自己生命值加一，同时向服务器发送&quot;LIFE#0&quot;，服务器接受到之后，生成一个随机数int rn = rnd.nextInt(2000);，然后拼接了字符串并用srn保存，String srn = “START#” + Integer.toString(rn);然后将消息群发给所有客户端，消息格式：“LIFE#” + strs[1] + “#” +“START#” + Integer.toString(rn)），用户端接收后分别处理用“#”分隔开的数据，错误情况下自身生命值减二，其他同上；然后调用init（）函数，再进行checkfail（）判断退出检查。</p>
<h4 id="源代码：-7">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">client</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.setLayout(<span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">this</span>.setBackground(Color.BLUE);</span><br><span class="line">    <span class="keyword">this</span>.setSize(<span class="number">900</span>, <span class="number">450</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.add(lbLife);</span><br><span class="line">    lbLife.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;黑体&quot;</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">    lbLife.setBackground(Color.yellow);</span><br><span class="line">    lbLife.setForeground(Color.PINK);</span><br><span class="line">    lbLife.setBounds(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.add(lbMoveChar);</span><br><span class="line">    lbMoveChar.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;黑体&quot;</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">    lbMoveChar.setForeground(Color.yellow);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.add(tfseparate);</span><br><span class="line">    tfseparate.setSize(<span class="number">900</span>, <span class="number">1</span>);</span><br><span class="line">    tfseparate.setLocation(<span class="number">0</span>, <span class="number">343</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.add(tfseparate1);</span><br><span class="line">    tfseparate1.setSize(<span class="number">900</span>, <span class="number">6</span>);</span><br><span class="line">    tfseparate1.setLocation(<span class="number">0</span>, <span class="number">295</span>);</span><br><span class="line">    tfseparate1.setBackground(Color.red);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.add(tfword);</span><br><span class="line">    tfword.setLocation(<span class="number">100</span>, <span class="number">355</span>);</span><br><span class="line">    tfword.setSize(<span class="number">500</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.add(tfwordtips);</span><br><span class="line">    tfwordtips.setLocation(<span class="number">100</span>, <span class="number">305</span>);</span><br><span class="line">    tfwordtips.setSize(<span class="number">200</span>, <span class="number">35</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.add(btn);</span><br><span class="line">    btn.setBackground(Color.white);</span><br><span class="line">    btn.setLocation(<span class="number">700</span>, <span class="number">355</span>);</span><br><span class="line">    btn.setSize(<span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//以上都是控件放置</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.init();<span class="comment">//调用init函数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        s = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">8888</span>);</span><br><span class="line">        <span class="comment">//连接服务端</span></span><br><span class="line">        <span class="comment">//JOptionPane.showMessageDialog(this,&quot;连接成功&quot;);</span></span><br><span class="line">        InputStream is = s.getInputStream();</span><br><span class="line">        br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">        OutputStream os = s.getOutputStream();</span><br><span class="line">        ps = <span class="keyword">new</span> PrintStream(os);</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();<span class="comment">//多线程调用run方法</span></span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception ex)&#123;</span><br><span class="line">        javax.swing.JOptionPane.showMessageDialog(<span class="keyword">this</span>,<span class="string">&quot;游戏异常退出！&quot;</span>);<span class="comment">//提示框</span></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    btn.addActionListener(<span class="keyword">new</span> AbstractAction() &#123;<span class="comment">//提交按钮触发事件</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent actionEvent)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>((tfword.getText()).equals(word))</span><br><span class="line">                &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;恭喜成功&quot;</span>);</span><br><span class="line">                    <span class="comment">//System.out.println(&quot;输入框的文本&quot;+tfword.getText());</span></span><br><span class="line">                    <span class="comment">//System.out.println(&quot;当前的word为：&quot;+word);</span></span><br><span class="line">                    writeFile(<span class="string">&quot;D:\\right.txt&quot;</span>,strSave);</span><br><span class="line">                    life+=<span class="number">1</span>;</span><br><span class="line">                    ps.println(<span class="string">&quot;LIFE#0&quot;</span>);</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;答案错误&quot;</span>);</span><br><span class="line">                    <span class="comment">//System.out.println(&quot;输入框的文本&quot;+tfword.getText());</span></span><br><span class="line">                    <span class="comment">//System.out.println(&quot;当前的word为：&quot;+word);</span></span><br><span class="line">                    writeFile(<span class="string">&quot;D:\\wrong.txt&quot;</span>,strSave);</span><br><span class="line">                    life-=<span class="number">2</span>;</span><br><span class="line">                    <span class="comment">//用于向服务器标识需要随机数，对方生命值加一</span></span><br><span class="line">                    ps.println(<span class="string">&quot;LIFE#0&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                init();</span><br><span class="line">                checkFail();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                canRun = <span class="keyword">false</span>;</span><br><span class="line">                <span class="comment">//javax.swing.JOptionPane.showMessageDialog(this,&quot;游戏异常退出！&quot;);</span></span><br><span class="line">                System.exit(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    timer.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="写入文件函数：">写入文件函数：</h3>
<h4 id="写入文件函数概述：">写入文件函数概述：</h4>
<p>该函数需要传入两个参数，一个是写入的文件名称（路径），另一个是传入该文件的字符串，先建一个文件流，然后用缓冲数组来接收传进来的字符串，打开文件流，把字符串写入文件，然后关闭文件流。</p>
<h4 id="源代码：-8">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeFile</span><span class="params">(String filename, String str)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(filename, <span class="keyword">true</span>);</span><br><span class="line">           <span class="keyword">byte</span>[] b = str.getBytes();</span><br><span class="line">           fos.write(b);</span><br><span class="line">           fos.close();</span><br><span class="line"></span><br><span class="line">       &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;<span class="comment">//写文件操作，不同场景下写入的文件不一样</span></span><br></pre></td></tr></table></figure>
<h3 id="读取文件函数：">读取文件函数：</h3>
<h4 id="读取文件函数概述：">读取文件函数概述：</h4>
<p>该函数需要传入两个参数，一个是读取的文件名称（路径），另一个是随机数（用来随机读取单词行），开始还是获取输入流，用br来按行读取文档，当且仅当br.readLine() 不为空且il &gt;= 0时，il自减（因为il不知道是多少，所以刚好帮助了实现随机读取），当il小于零时，用str1来接收读取到的那一行，strSave = str1 + “\r\n”;加入换行符，方便后续写入文件时的操作，然后用strs1数组来存取用空格分割好的字符串，String[] strs1 = str1.split(“\s+”);然后单词被存入strs1[0]，赋值给word；然后汉语翻译被存入strs1[1]，赋值给chinese。</p>
<h4 id="源代码：-9">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readWord</span><span class="params">(String filename, <span class="keyword">int</span> il)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">        FileInputStream fi = <span class="keyword">new</span> FileInputStream(filename);<span class="comment">//从文件中获取字节</span></span><br><span class="line">        InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(fi, <span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//字节流，指定编码格式，充当转换桥梁</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);<span class="comment">//字符流</span></span><br><span class="line">        <span class="comment">//br此处用来按行读取文档</span></span><br><span class="line">        <span class="keyword">while</span> (br.readLine() != <span class="keyword">null</span> &amp;&amp; il &gt;= <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            il--;</span><br><span class="line">            <span class="comment">//String str;</span></span><br><span class="line">            <span class="keyword">if</span> (il &lt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//用来按行读取，并分割出单词和解释</span></span><br><span class="line">                <span class="comment">//String的split方法支持正则表达式；</span></span><br><span class="line">                <span class="comment">//正则表达式\s表示匹配任何空白字符，+表示匹配一次或多次。</span></span><br><span class="line">                String str1 = br.readLine();</span><br><span class="line">                <span class="comment">//保存的字符串</span></span><br><span class="line">                strSave = str1 + <span class="string">&quot;\r\n&quot;</span>;<span class="comment">//加入换行符</span></span><br><span class="line">                String[] strs1 = str1.split(<span class="string">&quot;\\s+&quot;</span>);</span><br><span class="line">                word = strs1[<span class="number">0</span>];<span class="comment">//提取出单词，0存单词，1存翻译</span></span><br><span class="line">                chinese = strs1[<span class="number">1</span>];</span><br><span class="line">                System.out.println(<span class="string">&quot;1单词：&quot;</span> + word);</span><br><span class="line">                <span class="comment">//将翻译分配给选项</span></span><br><span class="line">                System.out.println(<span class="string">&quot;1单词源：&quot;</span> + strs1[<span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception e)</span><br><span class="line">    &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="初始化函数：">初始化函数：</h3>
<h4 id="初始化函数概述：">初始化函数概述：</h4>
<p>用来更新生命值，读取单词，设置单词提示，并且把单词的前两个字母显示出来，设置单词中文翻译，设置掉落位置，最后将输入框置空，方便下次操作。</p>
<h4 id="源代码：-10">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span><span class="comment">//用来更新生命值，读取单词，设置单词提示，设置单词意思，设置掉落位置</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    lbLife.setText(<span class="string">&quot;当前生命值：&quot;</span> + life);<span class="comment">//设置当前生命值</span></span><br><span class="line">    readWord(<span class="string">&quot;D:\\word.txt&quot;</span>, il);<span class="comment">//读取单词</span></span><br><span class="line">    tfwordtips.setText(<span class="string">&quot;单词的前两个字母为：&quot;</span>+word.substring(<span class="number">0</span>,<span class="number">2</span>));</span><br><span class="line">    lbMoveChar.setText(chinese);</span><br><span class="line">    lbMoveChar.setBounds(<span class="number">400</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">50</span>);<span class="comment">//初始掉落位置</span></span><br><span class="line">    tfword.setText(<span class="string">&quot;&quot;</span>);<span class="comment">//将输入框置空</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="判断失败函数：">判断失败函数：</h3>
<h4 id="判断失败函数概述：">判断失败函数概述：</h4>
<p>首先更新一下生命值，如果判断生命值小于等于零，向服务器发送WIN#，停止计时，然后自己客户端显示失败弹窗，自己线程退出，此时当服务器接收到WIN#的时候，输掉的线程已经退出了，所以按照服务器的指令，向所有消息队列（只剩一个了，因为输的已经退出了）发送UWIN#，然后赢家显示成功弹窗，并且退出。</p>
<h4 id="源代码：-11">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkFail</span><span class="params">()</span></span>&#123;</span><br><span class="line">        lbLife.setText(<span class="string">&quot;当前生命值：&quot;</span> + life);</span><br><span class="line">        <span class="keyword">if</span>(life &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            ps.println(<span class="string">&quot;WIN#&quot;</span>);</span><br><span class="line">            timer.stop();</span><br><span class="line">            javax.swing.JOptionPane.showMessageDialog(<span class="keyword">this</span>,<span class="string">&quot;生命值耗尽，游戏失败！&quot;</span>);</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Timer函数：">Timer函数：</h3>
<h4 id="Timer函数概述：">Timer函数概述：</h4>
<p>函数设定为每0.8s执行一次，如果掉落的单词模块&gt;=260（红线所在位置），那么就将strSave写入错误文件，然后检查此时是否可以判断出局，并且向服务器发送ASKRN#来获取下一次开始的随机数，服务器接收到ASKRN#，会生成一个随机数，int rn1 = rnd.nextInt(2000);然后新建一个字符串swn1，String swn1 = “START#” + Integer.toString(rn1);然后想客户端发送&quot;NOASK#+ “START#” + Integer.toString(rn1)&quot;，客户端接收到字符串，分割好之后发现strs[0].equals(“NOASK”)，然后生命值减一，设置随机数il = Integer.parseInt(strs[2]);然后执行init（）函数进行下一次对战。</p>
<h4 id="源代码：-12">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> Timer timer = <span class="keyword">new</span> Timer(<span class="number">800</span>,<span class="keyword">this</span>);</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent actionEvent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(lbMoveChar.getY() &gt;= <span class="number">260</span>)&#123;</span><br><span class="line">            writeFile(<span class="string">&quot;D:\\wrong.txt&quot;</span>,strSave);</span><br><span class="line">            <span class="comment">//life--;</span></span><br><span class="line">            checkFail();</span><br><span class="line">            <span class="comment">//随机数由服务器产生</span></span><br><span class="line">            ps.println(<span class="string">&quot;ASKRN#&quot;</span>);</span><br><span class="line">            <span class="comment">//System.out.println(&quot;底部调用checkFail&quot;);</span></span><br><span class="line">        &#125;</span><br><span class="line">        lbMoveChar.setLocation(lbMoveChar.getX(),lbMoveChar.getY()+<span class="number">10</span>);</span><br><span class="line">    &#125;<span class="comment">//让单词动起来，还要加上判断是否超过区域</span></span><br></pre></td></tr></table></figure>
<h3 id="run函数：-3">run函数：</h3>
<h4 id="run函数概述：-3">run函数概述：</h4>
<p>首先读取到服务器发过来的数据，存到str里面，然后用#来分割str，并把分割好的存入strs里面，针对不同的指令做不同的操作。最后调用init（）函数来重新开始下一局对战。</p>
<h4 id="源代码：-13">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(canRun)&#123;</span><br><span class="line">                String str = br.readLine();</span><br><span class="line">                String[] strs = str.split(<span class="string">&quot;#&quot;</span>);</span><br><span class="line">                <span class="comment">//判断从服务器接收到的消息是初始化number（用作随机读词）</span></span><br><span class="line">                <span class="keyword">if</span>(strs[<span class="number">0</span>].equals(<span class="string">&quot;START&quot;</span>))&#123;</span><br><span class="line">                    il = Integer.parseInt(strs[<span class="number">1</span>]);</span><br><span class="line">                    <span class="comment">//判断是减生命值的消息</span></span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(strs[<span class="number">0</span>].equals(<span class="string">&quot;LIFE&quot;</span>)) &#123;</span><br><span class="line">                    <span class="comment">//若消息是既包含LIFE又包含RND</span></span><br><span class="line">                    <span class="keyword">int</span> score = Integer.parseInt(strs[<span class="number">1</span>]);</span><br><span class="line">                    <span class="comment">//实现生命值的减少</span></span><br><span class="line">                    life+=score;</span><br><span class="line">                    checkFail();</span><br><span class="line">                    <span class="comment">//如果strs[]的格式为“LIFE#-1#START#srn&quot;</span></span><br><span class="line">                    <span class="keyword">if</span>(strs[<span class="number">2</span>].equals(<span class="string">&quot;START&quot;</span>))&#123;</span><br><span class="line">                        il = Integer.parseInt(strs[<span class="number">3</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(strs[<span class="number">0</span>].equals(<span class="string">&quot;UWIN&quot;</span>))&#123;</span><br><span class="line">                    <span class="comment">//你赢了并退出游戏</span></span><br><span class="line">                    timer.stop();</span><br><span class="line">                    javax.swing.JOptionPane.showMessageDialog(<span class="keyword">this</span>,<span class="string">&quot;游戏结束，你赢了！&quot;</span>);</span><br><span class="line">                    System.exit(<span class="number">0</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(strs[<span class="number">0</span>].equals(<span class="string">&quot;NOASK&quot;</span>))&#123;</span><br><span class="line">                    <span class="comment">//if(strs[1].equals(&quot;START&quot;))</span></span><br><span class="line">                    life--;</span><br><span class="line">                    il = Integer.parseInt(strs[<span class="number">2</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">                init();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception ex)&#123;</span><br><span class="line">            canRun = <span class="keyword">false</span>;</span><br><span class="line">            javax.swing.JOptionPane.showMessageDialog(<span class="keyword">this</span>,<span class="string">&quot;游戏异常退出！&quot;</span>);</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="主函数：-2">主函数：</h3>
<h4 id="主函数概述：-2">主函数概述：</h4>
<p>new一个frame，在frame里面会调用client（），初始化一下就全都可以用。</p>
<h4 id="源代码：-14">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> frame();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Frame框架：</h1>
<h2 id="功能：-3">功能：</h2>
<h3 id="构造函数：-4">构造函数：</h3>
<h4 id="构造函数概述：-4">构造函数概述：</h4>
<p>实例化一个client对象，弹出窗口获取输入的用户名，把这个用户名赋给实例出来的对象，然后按照client的大小设置frame的大小，把新建的Panel添加上去即可。</p>
<h4 id="源代码：-15">源代码：</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java_homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">frame</span> <span class="keyword">extends</span>  <span class="title">JFrame</span></span>&#123;<span class="comment">//窗口框架</span></span><br><span class="line">    <span class="keyword">private</span> client ct;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">frame</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());<span class="comment">//格式</span></span><br><span class="line">        <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<span class="comment">//退出</span></span><br><span class="line">        <span class="keyword">this</span>.setAlwaysOnTop(<span class="keyword">true</span>);<span class="comment">//窗口浮在最前面</span></span><br><span class="line">         String name = JOptionPane.showInputDialog(<span class="string">&quot;输入用户名&quot;</span>);<span class="comment">//弹窗</span></span><br><span class="line">         <span class="keyword">this</span>.setTitle(name);<span class="comment">//给客户端设置名字</span></span><br><span class="line">         ct = <span class="keyword">new</span> client();</span><br><span class="line">         <span class="keyword">this</span>.add(ct);</span><br><span class="line">         ct.setFocusable(<span class="keyword">true</span>);<span class="comment">//获取焦点</span></span><br><span class="line">        <span class="keyword">this</span>.setSize(ct.getWidth(),ct.getHeight());</span><br><span class="line">        <span class="keyword">this</span>.setResizable(<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">this</span>.setVisible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>思考与总结</h1>
<p>这个课设刚拿到手的时候都懵了 一点思路都没有，后来慢慢学完了网络编程以及触发事件，觉得自己稍微能有一点思路，但是还不够清晰明了，然后翻书看到了郭克华老师在书上写的实例，跟着上面建立了自己的大概思路，然后去网上查了一些资料，发现有些功能设计的确实十分巧妙，之后规划好思路，学习了各种功能应该怎么写、怎么用。</p>
<p>这个课设让我第一次接触到了网络编程，学习了搭建端口以及连接端口的核心知识，还有各种函数之间相互协调、相互调用。emm…差不多就这些了。</p>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          
          <li class="next">
            <a href="/cn/Java项目：六级英语单词对战/" data-toggle="tooltip" data-placement="top" title="Java项目：六级英语单词对战">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=Java项目：六级英语单词对战&body=Hi,I found this website and thought you might like it http://techqu.top/en/Java项目：六级英语单词对战/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: '',
      clientSecret: '',
      repo: '',
      owner: '',
      admin: '',
      id: 'Thu May 12 2022 14:06:41 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">演示视频</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#JAVA%E8%8B%B1%E8%AF%AD%E5%85%AD%E7%BA%A7%E5%8D%95%E8%AF%8D%E5%AF%B9%E6%88%98%E5%A4%A7%E4%BD%9C%E4%B8%9A"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">[JAVA英语六级单词对战大作业]</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#https-www-bilibili-com-video-BV18T4y1B7ws-share-source-copy-web"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV18T4y1B7ws?share_source&#x3D;copy_web</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">题目要求：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E7%94%A8Java%E7%BC%96%E7%A8%8B%E5%BC%80%E5%8F%91%E2%80%9C%E5%85%AD%E7%BA%A7%E5%8D%95%E8%AF%8D%E5%BC%BA%E5%8C%96%E8%AE%B0%E5%BF%86%E2%80%9D%E6%B8%B8%E6%88%8F"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">用Java编程开发“六级单词强化记忆”游戏</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EF%BC%881%EF%BC%89%E5%87%86%E5%A4%87%EF%BC%9A"><span class="toc-nav-number">2.1.1.</span> <span class="toc-nav-text">（1）准备：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EF%BC%882%EF%BC%89%E5%8A%9F%E8%83%BD1%EF%BC%9A"><span class="toc-nav-number">2.1.2.</span> <span class="toc-nav-text">（2）功能1：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EF%BC%883%EF%BC%89%E5%8A%9F%E8%83%BD2%EF%BC%9A"><span class="toc-nav-number">2.1.3.</span> <span class="toc-nav-text">（3）功能2：</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">服务器端：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">功能：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">3.1.1.</span> <span class="toc-nav-text">构造函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">3.1.1.1.</span> <span class="toc-nav-text">构造函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-nav-number">3.1.1.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#run%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">3.1.2.</span> <span class="toc-nav-text">run函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#run%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">3.1.2.1.</span> <span class="toc-nav-text">run函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-2"><span class="toc-nav-number">3.1.2.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ChatThread%E7%B1%BB"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">ChatThread类:</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%EF%BC%9A-2"><span class="toc-nav-number">3.2.1.</span> <span class="toc-nav-text">构造函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A-2"><span class="toc-nav-number">3.2.1.1.</span> <span class="toc-nav-text">构造函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-3"><span class="toc-nav-number">3.2.1.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#run%E5%87%BD%E6%95%B0%EF%BC%9A-2"><span class="toc-nav-number">3.2.2.</span> <span class="toc-nav-text">run函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#run%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A-2"><span class="toc-nav-number">3.2.2.1.</span> <span class="toc-nav-text">run函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-4"><span class="toc-nav-number">3.2.2.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%BE%A4%E5%8F%91%E6%B6%88%E6%81%AF%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">3.2.3.</span> <span class="toc-nav-text">群发消息函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%BE%A4%E5%8F%91%E6%B6%88%E6%81%AF%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">3.2.3.1.</span> <span class="toc-nav-text">群发消息函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-5"><span class="toc-nav-number">3.2.3.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%B8%BB%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">3.2.4.</span> <span class="toc-nav-text">主函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%B8%BB%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">3.2.4.1.</span> <span class="toc-nav-text">主函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-6"><span class="toc-nav-number">3.2.4.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">客户端：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A-2"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">功能：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%EF%BC%9A-3"><span class="toc-nav-number">4.1.1.</span> <span class="toc-nav-text">构造函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A-3"><span class="toc-nav-number">4.1.1.1.</span> <span class="toc-nav-text">构造函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%8C%89%E9%92%AE%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">4.1.1.2.</span> <span class="toc-nav-text">按钮触发事件概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-7"><span class="toc-nav-number">4.1.1.3.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">4.1.2.</span> <span class="toc-nav-text">写入文件函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">4.1.2.1.</span> <span class="toc-nav-text">写入文件函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-8"><span class="toc-nav-number">4.1.2.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">4.1.3.</span> <span class="toc-nav-text">读取文件函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">4.1.3.1.</span> <span class="toc-nav-text">读取文件函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-9"><span class="toc-nav-number">4.1.3.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">4.1.4.</span> <span class="toc-nav-text">初始化函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">4.1.4.1.</span> <span class="toc-nav-text">初始化函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-10"><span class="toc-nav-number">4.1.4.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%88%A4%E6%96%AD%E5%A4%B1%E8%B4%A5%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">4.1.5.</span> <span class="toc-nav-text">判断失败函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%88%A4%E6%96%AD%E5%A4%B1%E8%B4%A5%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">4.1.5.1.</span> <span class="toc-nav-text">判断失败函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-11"><span class="toc-nav-number">4.1.5.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Timer%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-nav-number">4.1.6.</span> <span class="toc-nav-text">Timer函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Timer%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-nav-number">4.1.6.1.</span> <span class="toc-nav-text">Timer函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-12"><span class="toc-nav-number">4.1.6.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#run%E5%87%BD%E6%95%B0%EF%BC%9A-3"><span class="toc-nav-number">4.1.7.</span> <span class="toc-nav-text">run函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#run%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A-3"><span class="toc-nav-number">4.1.7.1.</span> <span class="toc-nav-text">run函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-13"><span class="toc-nav-number">4.1.7.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%B8%BB%E5%87%BD%E6%95%B0%EF%BC%9A-2"><span class="toc-nav-number">4.1.8.</span> <span class="toc-nav-text">主函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%B8%BB%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A-2"><span class="toc-nav-number">4.1.8.1.</span> <span class="toc-nav-text">主函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-14"><span class="toc-nav-number">4.1.8.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">Frame框架：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A-3"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text">功能：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%EF%BC%9A-4"><span class="toc-nav-number">5.1.1.</span> <span class="toc-nav-text">构造函数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A6%82%E8%BF%B0%EF%BC%9A-4"><span class="toc-nav-number">5.1.1.1.</span> <span class="toc-nav-text">构造函数概述：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A-15"><span class="toc-nav-number">5.1.1.2.</span> <span class="toc-nav-text">源代码：</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">思考与总结</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#Java" title="Java">Java</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://smileslight.top/" target="_blank">Smile Slight</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          

          

          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Mr.Qu
          2022
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='诶嘿,隐藏小彩蛋,嘿嘿,你猜我有几个颜色,还有...,还有......,还有.........,没颜色了，彩蛋也没了,真没了......' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("http://techqu.top/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
